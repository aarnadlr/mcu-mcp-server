# Repository Guidelines

## Project Structure & Module Organization
- `src/` — TypeScript entrypoint `index.ts` wires Express transport; `create-server.ts` defines MCP tools and helpers.
- `build/` — generated by `pnpm run build`; treat as read-only.
- `public/` — static assets served by Express (status pages, health checks).
- `docs/` + `material-color-utilities/` — reference material; update only when syncing upstream libraries.
- `src/tools/color-scheme.ts` — Material Color Utilities integration. Extend this module when adding palette roles or additional scheme metadata.

## Build, Test, and Development Commands
- `pnpm install` installs dependencies after cloning or pulling.
- `pnpm run dev` runs TypeScript watch and nodemon-reloaded server on port 3000.
- `pnpm run build` compiles to `build/` with declarations and chmod for executables; this is what Vercel runs.
- `pnpm run start` serves the compiled output for smoke-testing production artifacts.

## Coding Style & Naming Conventions
- Code to strict TypeScript; avoid `any`, prefer typed helpers and async/await for flows that hit weather.gov.
- Follow 2-space indentation, `camelCase` for symbols, `PascalCase` for types, `UPPER_SNAKE_CASE` for constants like `NWS_API_BASE`.
- Keep Express setup in `index.ts`; expand tool logic into dedicated modules under `src/tools/` if functionality grows, exporting through `create-server.ts`.
- Avoid mutating the vendored MCU sources; consume them via ESM imports from `material-color-utilities/typescript`.

## Testing Guidelines
- Automated tests are not wired yet; stand up Vitest or equivalent before replacing the placeholder `pnpm test`.
- Until then, validate changes by running `pnpm run dev` and exercising `POST /mcp` via MCP Inspector or curl fixtures (`docs/samples` when added).
- When tests exist, co-locate them under `src/**/*.spec.ts` and cover schema validation, error fallbacks, and HTTP surface.

## Commit & Pull Request Guidelines
- With no existing history, adopt Conventional Commits (`feat:`, `fix:`) in imperative mood and ≤72-char subjects; add detail in the body as needed.
- Reference issues or Notion tasks in the first paragraph, and list manual verification (commands run, inspector screenshots).
- Pull requests should explain risk areas (rate limiting, transport downtime) and request review when touching `create-server.ts` or shared middleware.
- Keep secrets in `.env` files; never include credentials in commits or PR discussions.
